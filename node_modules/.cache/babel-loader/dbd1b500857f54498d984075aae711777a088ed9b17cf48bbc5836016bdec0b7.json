{"ast":null,"code":"// Lightweight service worker registration with secure-context checks\n// Registers only when running on HTTPS or localhost, and skips WebView/Electron.\n\nfunction isSecureContextAllowed() {\n  try {\n    const protocol = window.location.protocol;\n    const hostname = window.location.hostname;\n\n    // Basic secure context: HTTPS or localhost\n    if (protocol === \"https:\" || hostname === \"localhost\" || hostname === \"127.0.0.1\") return true;\n\n    // Avoid registering inside Electron / WebView / native wrappers\n    const ua = navigator.userAgent || \"\";\n    if (/Electron|wv|WebView/i.test(ua)) return false;\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\nexport function register(swUrl = \"/service-worker.js\") {\n  if (\"serviceWorker\" in navigator && isSecureContextAllowed()) {\n    // Wait for the page to load before registering.\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker.register(swUrl).then(registration => {\n        // Successful registration\n        // You can add update handling here if desired\n        // console.debug('ServiceWorker registration successful:', registration);\n      }).catch(error => {\n        // Registration failed\n        // console.warn('ServiceWorker registration failed:', error);\n      });\n    });\n  }\n}\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.getRegistrations().then(registrations => {\n      for (const reg of registrations) {\n        reg.unregister();\n      }\n    });\n  }\n}","map":{"version":3,"names":["isSecureContextAllowed","protocol","window","location","hostname","ua","navigator","userAgent","test","e","register","swUrl","addEventListener","serviceWorker","then","registration","catch","error","unregister","getRegistrations","registrations","reg"],"sources":["/home/aliullah/final_project_34/frontend/src/serviceWorkerRegistration.js"],"sourcesContent":["// Lightweight service worker registration with secure-context checks\n// Registers only when running on HTTPS or localhost, and skips WebView/Electron.\n\nfunction isSecureContextAllowed() {\n  try {\n    const protocol = window.location.protocol;\n    const hostname = window.location.hostname;\n\n    // Basic secure context: HTTPS or localhost\n    if (\n      protocol === \"https:\" ||\n      hostname === \"localhost\" ||\n      hostname === \"127.0.0.1\"\n    )\n      return true;\n\n    // Avoid registering inside Electron / WebView / native wrappers\n    const ua = navigator.userAgent || \"\";\n    if (/Electron|wv|WebView/i.test(ua)) return false;\n\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function register(swUrl = \"/service-worker.js\") {\n  if (\"serviceWorker\" in navigator && isSecureContextAllowed()) {\n    // Wait for the page to load before registering.\n    window.addEventListener(\"load\", () => {\n      navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n          // Successful registration\n          // You can add update handling here if desired\n          // console.debug('ServiceWorker registration successful:', registration);\n        })\n        .catch((error) => {\n          // Registration failed\n          // console.warn('ServiceWorker registration failed:', error);\n        });\n    });\n  }\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.getRegistrations().then((registrations) => {\n      for (const reg of registrations) {\n        reg.unregister();\n      }\n    });\n  }\n}\n"],"mappings":"AAAA;AACA;;AAEA,SAASA,sBAAsBA,CAAA,EAAG;EAChC,IAAI;IACF,MAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ;IACzC,MAAMG,QAAQ,GAAGF,MAAM,CAACC,QAAQ,CAACC,QAAQ;;IAEzC;IACA,IACEH,QAAQ,KAAK,QAAQ,IACrBG,QAAQ,KAAK,WAAW,IACxBA,QAAQ,KAAK,WAAW,EAExB,OAAO,IAAI;;IAEb;IACA,MAAMC,EAAE,GAAGC,SAAS,CAACC,SAAS,IAAI,EAAE;IACpC,IAAI,sBAAsB,CAACC,IAAI,CAACH,EAAE,CAAC,EAAE,OAAO,KAAK;IAEjD,OAAO,KAAK;EACd,CAAC,CAAC,OAAOI,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;AAEA,OAAO,SAASC,QAAQA,CAACC,KAAK,GAAG,oBAAoB,EAAE;EACrD,IAAI,eAAe,IAAIL,SAAS,IAAIN,sBAAsB,CAAC,CAAC,EAAE;IAC5D;IACAE,MAAM,CAACU,gBAAgB,CAAC,MAAM,EAAE,MAAM;MACpCN,SAAS,CAACO,aAAa,CACpBH,QAAQ,CAACC,KAAK,CAAC,CACfG,IAAI,CAAEC,YAAY,IAAK;QACtB;QACA;QACA;MAAA,CACD,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;QAChB;QACA;MAAA,CACD,CAAC;IACN,CAAC,CAAC;EACJ;AACF;AAEA,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3B,IAAI,eAAe,IAAIZ,SAAS,EAAE;IAChCA,SAAS,CAACO,aAAa,CAACM,gBAAgB,CAAC,CAAC,CAACL,IAAI,CAAEM,aAAa,IAAK;MACjE,KAAK,MAAMC,GAAG,IAAID,aAAa,EAAE;QAC/BC,GAAG,CAACH,UAAU,CAAC,CAAC;MAClB;IACF,CAAC,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}